<!DOCTYPE html>
<!-- saved from url=(0051)https://www.cnblogs.com/question-sky/p/9056649.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin">
    <meta name="description" content="承接 &amp;quot;Spring源码情操陶冶 自定义节点的解析&amp;quot; 。本节关于事务进行简单的解析 spring配置文件样例 简单的事务配置，对 开头的方法加事务， 开头的设置为不加事务只读模式 ">
    <meta property="og:description" content="承接 &amp;quot;Spring源码情操陶冶 自定义节点的解析&amp;quot; 。本节关于事务进行简单的解析 spring配置文件样例 简单的事务配置，对 开头的方法加事务， 开头的设置为不加事务只读模式 ">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Spring源码情操陶冶-tx:advice解析器 - 南柯问天 - 开发者的网上家园</title>
    <link id="favicon" rel="shortcut icon" href="https://common.cnblogs.com/favicon.svg" type="image/svg+xml">
    
    <link rel="stylesheet" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/blog-common.min.css">
    <link id="MainCss" rel="stylesheet" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/bundle-blacklowkey.min.css">
    <link type="text/css" rel="stylesheet" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/custom.css">
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/bundle-blacklowkey-mobile.min.css">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/question-sky/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/question-sky/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/question-sky/wlwmanifest.xml">
    <script src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/osd.js"></script><script async="" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/analytics.js"></script><script src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/hm.js"></script><script>
        var currentBlogId = 334915;
        var currentBlogApp = 'question-sky';
        var cb_enable_mathjax = false;
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'BlackLowKey';
        var visitorUserId = '';
    </script>
        <script>
            var currentPostDateAdded = '2018-05-18 05:17';
        </script>
    <script src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/jquery-2.2.0.min.js"></script>
    <script src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/blog-common.min.js"></script>
    
    
    
<script src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/pubads_impl_2020092401.js" async=""></script><link rel="preload" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/f.txt" as="script"><script type="text/javascript" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/f.txt"></script><link rel="prefetch" href="https://97fe720399a09f9c608163e1017dfaa7.safeframe.googlesyndication.com/safeframe/1-0-37/html/container.html"><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-37/html/container.html"></head>
<body>
    <a name="top"></a>
    <div id="top_nav" class="navbar navbar-custom">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding">
                    <a href="https://www.cnblogs.com/" title="开发者的网上家园"><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/logo.svg" alt="博客园Logo"></a>
                </li>
                <li><a href="https://www.cnblogs.com/" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;skin-navbar-sitehome&#39;)">首页</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;skin-navbar-news&#39;)">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;skin-navbar-q&#39;)">博问</a></li>
                <li><a id="nav_brandzone" href="https://brands.cnblogs.com/" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;skin-navbar-brands&#39;)">专区</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;skin-navbar-ing&#39;)">闪存</a></li>
                <li><a href="https://edu.cnblogs.com/" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;skin-navbar-edu&#39;)">班级</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="text" tabindex="3">
                        <button type="submit" id="zzk_search_button">
                            <img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/search.svg" alt="搜索">
                        </button>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客" style="display: none;">
                        <img id="myblog_icon" class="navbar-icon" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/myblog.svg" alt="我的博客">
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息" style="display: none;">
                        <img id="msg_icon" class="navbar-icon" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/message.svg" alt="短消息">
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown" style="display: none;">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/avatar-default.svg" alt="用户头像">
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" onclick="logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup/" style="display: inline;">注册</a>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signin/?returnUrl=https://www.cnblogs.com/" style="display: inline;">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    <div id="page_begin_html">
        <link type="text/css" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/cuscommon.css" rel="stylesheet">
<link type="text/css" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/updown.css" rel="stylesheet">
<link type="text/css" href="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/iconfont.css" rel="stylesheet">
    </div>
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/question-sky/"><img id="blogLogo" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/logo.gif" alt="返回主页"></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/question-sky/">南柯问天</a>
</h1>
<h2>
执笔问天、执着问道、执意生活
</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/question-sky/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E5%8D%97%E6%9F%AF%E9%97%AE%E5%A4%A9">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/question-sky/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			
			<span id="stats_post_count">随笔 - 
109&nbsp; </span>
<span id="stats_article_count">文章 - 
0&nbsp; </span>
<span id="stats-comment_count">评论 - 
63</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class="postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/question-sky/p/9056649.html">
    <span>Spring源码情操陶冶-tx:advice解析器</span>
    


</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
    <blockquote>
<p>承接<a href="http://www.cnblogs.com/question-sky/p/6947008.html" style="color: rgb(0, 130, 0); padding: 5px;">Spring源码情操陶冶-自定义节点的解析</a>。本节关于事务进行简单的解析</p>
</blockquote>
<h3 id="spring配置文件样例">spring配置文件样例</h3>
<p>简单的事务配置，对<code>save/delete</code>开头的方法加事务，<code>get/find</code>开头的设置为不加事务只读模式</p>
<pre><code class="language-xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"txAdvice"</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">"transactionManager"</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"save*"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete*"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"get*"</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">"true"</span>/&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"find*"</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">"true"</span>/&gt;</span>  
        <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span>
</code></pre>
<h3 id="txadvicebeandefinitionparser解析器">TxAdviceBeanDefinitionParser解析器</h3>
<p><code>tx:advice</code>节点对应的解析器为<code>TxAdviceBeanDefinitionParser</code>，下面针对该解析器作下详细的解读</p>
<h4 id="实例化对象">实例化对象</h4>
<p>直接看复写的<code>getBeanClass()</code>方法</p>
<pre><code class="language-java hljs">	<span class="hljs-meta">@Override</span>
	<span class="hljs-keyword">protected</span> Class&lt;?&gt; getBeanClass(Element element) {
		<span class="hljs-keyword">return</span> TransactionInterceptor.class;
	}
</code></pre>
<p>即<code>TxAdviceBeanDefinitionParser</code>解析器最终解析<code>tx:advice</code>节点为<code>TransactionInterceptor</code>对象</p>
<h4 id="通用的属性集合">通用的属性集合</h4>
<pre><code class="language-java hljs">	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String METHOD_ELEMENT = <span class="hljs-string">"method"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String METHOD_NAME_ATTRIBUTE = <span class="hljs-string">"name"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ATTRIBUTES_ELEMENT = <span class="hljs-string">"attributes"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String TIMEOUT_ATTRIBUTE = <span class="hljs-string">"timeout"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String READ_ONLY_ATTRIBUTE = <span class="hljs-string">"read-only"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PROPAGATION_ATTRIBUTE = <span class="hljs-string">"propagation"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ISOLATION_ATTRIBUTE = <span class="hljs-string">"isolation"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ROLLBACK_FOR_ATTRIBUTE = <span class="hljs-string">"rollback-for"</span>;

	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String NO_ROLLBACK_FOR_ATTRIBUTE = <span class="hljs-string">"no-rollback-for"</span>;
</code></pre>
<p>针对上述的属性，我们可以看下其中的具体解析</p>
<h4 id="doparse-解析txadvice节点">doParse()-解析tx:advice节点</h4>
<p>源码端上</p>
<pre><code class="language-java hljs">	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doParse</span><span class="hljs-params">(Element element, ParserContext parserContext, BeanDefinitionBuilder builder)</span> </span>{
		<span class="hljs-comment">// 解析transaction-manager属性对应的bean ref名，默认名为transactionManager</span>
		builder.addPropertyReference(<span class="hljs-string">"transactionManager"</span>, TxNamespaceHandler.getTransactionManagerName(element));
		
		<span class="hljs-comment">// 解析子节点tx:attributes</span>
		List&lt;Element&gt; txAttributes = DomUtils.getChildElementsByTagName(element, ATTRIBUTES_ELEMENT);
		<span class="hljs-keyword">if</span> (txAttributes.size() &gt; <span class="hljs-number">1</span>) {
			parserContext.getReaderContext().error(
					<span class="hljs-string">"Element &lt;attributes&gt; is allowed at most once inside element &lt;advice&gt;"</span>, element);
		}
		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (txAttributes.size() == <span class="hljs-number">1</span>) {
			<span class="hljs-comment">// Using attributes source.</span>
			Element attributeSourceElement = txAttributes.get(<span class="hljs-number">0</span>);
			<span class="hljs-comment">// 解析tx:attribute集合</span>
			RootBeanDefinition attributeSourceDefinition = parseAttributeSource(attributeSourceElement, parserContext);
			builder.addPropertyValue(<span class="hljs-string">"transactionAttributeSource"</span>, attributeSourceDefinition);
		}
		<span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// 注册解析器用于解析注解@Transactional</span>
			builder.addPropertyValue(<span class="hljs-string">"transactionAttributeSource"</span>,
					<span class="hljs-keyword">new</span> RootBeanDefinition(<span class="hljs-string">"org.springframework.transaction.annotation.AnnotationTransactionAttributeSource"</span>));
		}
	}
</code></pre>
<p>对于<code>@Transactional</code>方式的解析我们不在此处展开，我们先看下通用的<code>parseAttributeSource()</code>方法解析<code>tx:attribute</code>集合，其会被包装为<code>NameMatchTransactionAttributeSource.class</code>对象。源码如下</p>
<pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> RootBeanDefinition <span class="hljs-title">parseAttributeSource</span><span class="hljs-params">(Element attrEle, ParserContext parserContext)</span> </span>{
		<span class="hljs-comment">// 解析tx:method节点</span>
		List&lt;Element&gt; methods = DomUtils.getChildElementsByTagName(attrEle, METHOD_ELEMENT);
		ManagedMap&lt;TypedStringValue, RuleBasedTransactionAttribute&gt; transactionAttributeMap =
			<span class="hljs-keyword">new</span> ManagedMap&lt;TypedStringValue, RuleBasedTransactionAttribute&gt;(methods.size());
		transactionAttributeMap.setSource(parserContext.extractSource(attrEle));
		
		<span class="hljs-comment">// </span>
		<span class="hljs-keyword">for</span> (Element methodEle : methods) {
			<span class="hljs-comment">// 解析name属性，其可符合ant-style模式.包装成TypedStringValue对象</span>
			String name = methodEle.getAttribute(METHOD_NAME_ATTRIBUTE);
			TypedStringValue nameHolder = <span class="hljs-keyword">new</span> TypedStringValue(name);
			nameHolder.setSource(parserContext.extractSource(methodEle));
			
			<span class="hljs-comment">// 解析propagation、isolation、timeout、read-only属性</span>
			RuleBasedTransactionAttribute attribute = <span class="hljs-keyword">new</span> RuleBasedTransactionAttribute();
			String propagation = methodEle.getAttribute(PROPAGATION_ATTRIBUTE);
			String isolation = methodEle.getAttribute(ISOLATION_ATTRIBUTE);
			String timeout = methodEle.getAttribute(TIMEOUT_ATTRIBUTE);
			String readOnly = methodEle.getAttribute(READ_ONLY_ATTRIBUTE);
			<span class="hljs-keyword">if</span> (StringUtils.hasText(propagation)) {
				attribute.setPropagationBehaviorName(RuleBasedTransactionAttribute.PREFIX_PROPAGATION + propagation);
			}
			<span class="hljs-keyword">if</span> (StringUtils.hasText(isolation)) {
				attribute.setIsolationLevelName(RuleBasedTransactionAttribute.PREFIX_ISOLATION + isolation);
			}
			<span class="hljs-keyword">if</span> (StringUtils.hasText(timeout)) {
				<span class="hljs-keyword">try</span> {
					attribute.setTimeout(Integer.parseInt(timeout));
				}
				<span class="hljs-keyword">catch</span> (NumberFormatException ex) {
					parserContext.getReaderContext().error(<span class="hljs-string">"Timeout must be an integer value: ["</span> + timeout + <span class="hljs-string">"]"</span>, methodEle);
				}
			}
			<span class="hljs-keyword">if</span> (StringUtils.hasText(readOnly)) {
				attribute.setReadOnly(Boolean.valueOf(methodEle.getAttribute(READ_ONLY_ATTRIBUTE)));
			}

			<span class="hljs-comment">// 解析rollback-for、no-rollback-for属性</span>
			List&lt;RollbackRuleAttribute&gt; rollbackRules = <span class="hljs-keyword">new</span> LinkedList&lt;RollbackRuleAttribute&gt;();
			<span class="hljs-keyword">if</span> (methodEle.hasAttribute(ROLLBACK_FOR_ATTRIBUTE)) {
				String rollbackForValue = methodEle.getAttribute(ROLLBACK_FOR_ATTRIBUTE);
				addRollbackRuleAttributesTo(rollbackRules,rollbackForValue);
			}
			<span class="hljs-keyword">if</span> (methodEle.hasAttribute(NO_ROLLBACK_FOR_ATTRIBUTE)) {
				String noRollbackForValue = methodEle.getAttribute(NO_ROLLBACK_FOR_ATTRIBUTE);
				addNoRollbackRuleAttributesTo(rollbackRules,noRollbackForValue);
			}
			attribute.setRollbackRules(rollbackRules);

			transactionAttributeMap.put(nameHolder, attribute);
		}
		
		<span class="hljs-comment">// 最后包装成NameMatchTransactionAttributeSource对象，存放上述的配置</span>
		RootBeanDefinition attributeSourceDefinition = <span class="hljs-keyword">new</span> RootBeanDefinition(NameMatchTransactionAttributeSource.class);
		attributeSourceDefinition.setSource(parserContext.extractSource(attrEle));
		attributeSourceDefinition.getPropertyValues().add(<span class="hljs-string">"nameMap"</span>, transactionAttributeMap);
		<span class="hljs-keyword">return</span> attributeSourceDefinition;
	}
</code></pre>
<p>代码很简单，都是解析属性的，不过还是对上述的一些配置作下白话的总结</p>
<hr>
<ul>
<li>
<p>name  支持ant-style语法，即匹配对应的方法，比如<code>save*</code>，匹配<code>saveUser()/save()</code>等方法</p>
</li>
<li>
<p>propagation  事务传播方式，对应spring的TransactionDefinition接口类常量</p>
<ul>
<li>required  对应<code>PROPAGATION_REQUIRED</code>，对当前的方法判断如果不存在事务，则创建事务。默认配置</li>
<li>required_new  对应<code>PROPAGATION_REQUIRED_NEW</code>，对当前方法判断如果存在事务，则创建新事务，待方法执行完毕后恢复事务；反之创建新事务，让方法运行在新事务环境下。即<em>当前方法将运行在独立的新事务下</em></li>
<li>supports  对应<code>PROPAGATION_SUPPORTS</code>，对当前方法判断如果存在事务，则加入该事务；反之则让方法处于非事务状态执行</li>
<li>not_spported  对应<code>PROPAGATION_NOT_SUPPORTED</code>，对当前方法判断如果存在事务，则挂起该事务，等方法执行完毕后，再恢复事务。即当前方法不需要事务支持</li>
<li>mandatory  对应<code>PROPAGATION_MANDATORY</code>，对当前方法判断如果存在事务，则加入该事务；反之不能新建事务，且抛出异常。即<em>必须处于事务下运行</em></li>
<li>never  对应<code>PROPAGATION_NEVER</code>，对当前方法判断如果存在事务，则抛异常；反之正常运行。即<em>必须在非事务下运行</em></li>
<li>nested  对应<code>PROPAGATION_NESTED</code>，可嵌入式的事务。</li>
</ul>
</li>
<li>
<p>isolation  事务隔离级别，对应spring的TransactionDefinition接口类常量</p>
<ul>
<li>default  对应<code>ISOLATION_DEFAULT</code>，不作隔离要求，可能会导致<code>dirty read/unrepeatable read/phantom read</code></li>
<li>read_uncommitted  对应JDBC Connection的<code>TRANSACTION_READ_UNCOMMITTED</code>  ，可能会导致<code>dirty read/unrepeatable read/phantom read</code></li>
<li>read_committed  对应JDBC Connection的<code>TRANSACTION_READ_COMMITTED</code>，可能会导致<code>unrepeatable read/phantom read</code></li>
<li>reaptable_read  对应JDBC Connection的<code>TRANSACTION_REPEATABLE_READ</code>，可能会导致<code>phantom read</code></li>
<li>serializable  对应JDBC Connection的<code>TRANSACTION_SERIALIZABLE</code>，最安全但最耗性能<br>
其中关于<code>脏读、不可重复读、幻读</code>的概念见<a href="https://blog.csdn.net/wang379275614/article/details/24818397" style="color: rgb(0, 130, 0); padding: 5px;">引文</a>。另附言博主对<strong>不可重复读、幻读</strong>的理解
<blockquote>
<p>两者均是在同一事务中会出现的情况，执行的条件均一样。但<strong>不可重复读</strong>关心返回的数据是否一致，而<strong>幻读</strong>关心返回的数据条数是否一致</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>timeout 超时参数，单位为s。其只应用于事务传播方式为<code>Required/Required_new</code>，默认为-1</p>
</li>
<li>
<p>read-only  是否配置事务只读，默认为false</p>
</li>
<li>
<p>rollback-for 异常回滚策略配置，即出现何种异常进行回滚，可配置多个异常，支持<code>,</code>分隔。注意此处的配置的异常名也符合ant-style模式</p>
</li>
<li>
<p>no-rollback-for  异常不回滚策略配置，即出现何种异常不进行回滚，可配置多个异常，支持<code>,</code>分隔。注意此处的配置的异常名也符合ant-style模式</p>
</li>
</ul>
<hr>
<h3 id="事务拦截逻辑-transactioninterceptor">事务拦截逻辑-TransactionInterceptor</h3>
<h4 id="uml一览">UML一览</h4>
<p><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/1111874-20180520130846227-1378891566.png" alt="UML_TransactionInterceptor" loading="lazy"></p>
<p>通过上图我们发现其也是<code>Advice</code>接口的实现类，说明此类可应用于<code>aop:advisor</code>配置</p>
<h4 id="invoke-methodinterceptor公共调用方法">invoke()-MethodInterceptor公共调用方法</h4>
<p>所有的Advisor封装类都会含有MethodInterceptor的实现类的引用，我们可以看下事务处理的切面处理方式</p>
<pre><code class="language-java hljs"><span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(<span class="hljs-keyword">final</span> MethodInvocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
		<span class="hljs-comment">// Work out the target class: may be {@code null}.</span>
		<span class="hljs-comment">// The TransactionAttributeSource should be passed the target class</span>
		<span class="hljs-comment">// as well as the method, which may be from an interface.</span>
		Class&lt;?&gt; targetClass = (invocation.getThis() != <span class="hljs-keyword">null</span> ? AopUtils.getTargetClass(invocation.getThis()) : <span class="hljs-keyword">null</span>);

		<span class="hljs-comment">// Adapt to TransactionAspectSupport's invokeWithinTransaction...</span>
		<span class="hljs-keyword">return</span> invokeWithinTransaction(invocation.getMethod(), targetClass, <span class="hljs-keyword">new</span> InvocationCallback() {
			<span class="hljs-meta">@Override</span>
			<span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">proceedWithInvocation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>{
				<span class="hljs-keyword">return</span> invocation.proceed();
			}
		});
	}
</code></pre>
<p>其会调用invokeWithinTransation()方法来解决此类问题，通过表面文字我们可以猜出其会判断对相应的方法是否添加事务来执行，由于代码过长，博主就截取重要的片段来分析</p>
<pre><code class="language-java hljs"><span class="hljs-keyword">if</span> (txAttr == <span class="hljs-keyword">null</span> || !(tm <span class="hljs-keyword">instanceof</span> CallbackPreferringPlatformTransactionManager)) {
			<span class="hljs-comment">// Standard transaction demarcation with getTransaction and commit/rollback calls.</span>
			TransactionInfo txInfo = createTransactionIfNecessary(tm, txAttr, joinpointIdentification);
			Object retVal = <span class="hljs-keyword">null</span>;
			<span class="hljs-keyword">try</span> {
				<span class="hljs-comment">// This is an around advice: Invoke the next interceptor in the chain.</span>
				<span class="hljs-comment">// This will normally result in a target object being invoked.</span>
				retVal = invocation.proceedWithInvocation();
			}
			<span class="hljs-keyword">catch</span> (Throwable ex) {
				<span class="hljs-comment">// target invocation exception</span>
				completeTransactionAfterThrowing(txInfo, ex);
				<span class="hljs-keyword">throw</span> ex;
			}
			<span class="hljs-keyword">finally</span> {
				cleanupTransactionInfo(txInfo);
			}
			commitTransactionAfterReturning(txInfo);
			<span class="hljs-keyword">return</span> retVal;
		}
</code></pre>
<p>从以上的代码可知，我们可以得到以下结论</p>
<blockquote>
<ol>
<li>根据method对应的事务配置，创建<code>TransactionInfo</code>对象。即判断是否对相应的方法加上事务</li>
<li>再执行相应的方法的业务</li>
<li>如果执行业务过程中，出现异常则根据异常匹配规则进行相应的回滚策略</li>
<li>无第三点的条件则会保存当前的事务状态</li>
<li>最后提交事务，使增删改查操作生效，保持一致性、原子性</li>
</ol>
</blockquote>
<h3 id="小结">小结</h3>
<p>tx:advice配置多与spring aop结合使用，通过切面的解耦使其可以在方法每次执行的时候根据配置是否添加事务，是个很好的代码设计。</p>

</div>
<div id="MySignature">作者：南柯问天 
出处：http://www.cnblogs.com/question-sky/
本文版权归本人和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。</div>
<div class="clear"></div>
<div id="blog_post_info_block">


    <div id="blog_post_info">
<div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(9056649,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
        <a id="green_channel_follow" onclick="follow(&#39;209bb57b-77f9-e611-845c-ac853d9f53ac&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/question-sky/" target="_blank"><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/20170224164226.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/question-sky/">南柯问天</a><br>
            <a href="https://home.cnblogs.com/u/question-sky/followees/">关注 - 2</a><br>
            <a href="https://home.cnblogs.com/u/question-sky/followers/">粉丝 - 62</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;209bb57b-77f9-e611-845c-ac853d9f53ac&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(9056649,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(9056649,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>

<script type="text/javascript">
    currentDiggType = 0;
</script></div>
    <div class="clear"></div>
    <div id="post_next_prev">

    <a href="https://www.cnblogs.com/question-sky/archive/2004/01/13/8819850.html" class="p_n_p_prefix">« </a> 上一篇：    <a href="https://www.cnblogs.com/question-sky/archive/2004/01/13/8819850.html" title="发布于 2004-01-13 00:00">Spring源码情操陶冶-任务定时器ConcurrentTaskScheduler</a>
    <br>
    <a href="https://www.cnblogs.com/question-sky/archive/2004/01/13/9360722.html" class="p_n_p_prefix">» </a> 下一篇：    <a href="https://www.cnblogs.com/question-sky/archive/2004/01/13/9360722.html" title="发布于 2004-01-13 00:00">springboot情操陶冶-初识springboot</a>

</div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2018-05-18 17:17</span>&nbsp;
<a href="https://www.cnblogs.com/question-sky/">南柯问天</a>&nbsp;
阅读(<span id="post_view_count">904</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=9056649" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(9056649);return false;">收藏</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 334915, cb_blogApp = 'question-sky', cb_blogUserGuid = '209bb57b-77f9-e611-845c-ac853d9f53ac';
    var cb_entryId = 9056649, cb_entryCreatedDate = '2018-05-18 17:17', cb_postType = 1;
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/question-sky/p/9056649.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/question-sky/p/9056649.html#top">返回顶部</a></div>
    <div id="comment_form_container" style="visibility: visible;"><div class="login_tips">
    注册用户登录后才能发表评论，请 
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a>
     或 
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，
    <a href="https://www.cnblogs.com/">访问</a> 网站首页。
</div></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-ucancode&#39;)">【推荐】超50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="https://www.cnblogs.com/cmt/p/13704696.html" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-声网征文&#39;)">【推荐】为自己发“声” —— 声网RTC征文大赛在园子里征稿</a><br></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1592365906576-0" style="width: 300px; height: 250px;" data-google-query-id="CMmxjY_0kewCFQylvQodO3MDAA"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="1" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/saved_resource.html"></iframe></div></div>
    </div>
    <div id="under_post_news"><div class="recomm-block"><b>相关博文：</b><br>·  <a title="通知advice" href="https://www.cnblogs.com/yunhemeihe/p/12080178.html" target="_blank" onclick="clickRecomItmem(12080178)">通知advice</a><br>·  <a title="通知advice" href="https://www.cnblogs.com/yunhemeihe/p/12079935.html" target="_blank" onclick="clickRecomItmem(12079935)">通知advice</a><br>·  <a title="docker部署TX-LCN5.0.2" href="https://www.cnblogs.com/conswin/p/11599148.html" target="_blank" onclick="clickRecomItmem(11599148)">docker部署TX-LCN5.0.2</a><br>·  <a title="011-Springaop002-核心说明-切点PointCut、通知Advice、切面Advisor" href="https://www.cnblogs.com/bjlhx/p/12081493.html" target="_blank" onclick="clickRecomItmem(12081493)">011-Springaop002-核心说明-切点PointCut、通知Advice、切面Advisor</a><br>·  <a title="Spring---SpringIntegration" href="https://www.cnblogs.com/anpeiyong/p/11997741.html" target="_blank" onclick="clickRecomItmem(11997741)">Spring---SpringIntegration</a><br>»  <a target="_blank" href="https://recomm.cnblogs.com/blogpost/9056649">更多推荐...</a></div></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id="div-gpt-ad-1592366332455-0" style="width: 468px; height: 60px;" data-google-query-id="CMqxjY_0kewCFQylvQodO3MDAA"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="2" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/saved_resource(1).html"></iframe></div></div>
    </div>
    <div id="under_post_kb">
<div class="itnews c_ad_block">
    <b>最新 IT 新闻</b>:
    <br>
 ·          <a href="https://news.cnblogs.com/n/674134/" target="_blank">国内首家！B站升级HDR10真彩画质，向大会员开放</a>
        <br>
 ·          <a href="https://news.cnblogs.com/n/674133/" target="_blank">马云即日起不再担任阿里巴巴集团董事</a>
        <br>
 ·          <a href="https://news.cnblogs.com/n/674119/" target="_blank">十一黄金周为什么没有互联网“偷袭”战</a>
        <br>
 ·          <a href="https://news.cnblogs.com/n/674132/" target="_blank">消息称特斯拉将推出磷酸铁锂电池的国产Model 3</a>
        <br>
 ·          <a href="https://news.cnblogs.com/n/674131/" target="_blank">腾讯地图联合众多服务商 在全国上线聚合打车服务</a>
        <br>
    » <a href="https://news.cnblogs.com/" title="IT 新闻" target="_blank">更多新闻...</a>
</div></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
        deliverBigBanner();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);        deliverT2();
        deliverC1C2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem"><!--done-->
<h3 class="catListTitle">公告</h3>

<div id="blog-news">
    <div>
<img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/o_car.jpg" style="width:111px;height:100px;margin-left:40px">
<ul>
 <li class="active">
 <div style="margin-top:5px">
    <a href="https://github.com/jtjsir/" target="_blank"><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/o_github.jpg" style="width:30px;height:30px;margin-left:60px;"></a>
  <a href="mailto:questionsky1211@gmail.com"><img src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/o_gmail.jpg" style="width:30px;height:30px;margin-left:5px;"></a>
</div>
</li>
</ul>
</div>
    <div id="profile_block">
        昵称：
        <a href="https://home.cnblogs.com/u/question-sky/">
            南柯问天
        </a>
        <br>
        园龄：
        <a href="https://home.cnblogs.com/u/question-sky/" title="入园时间：2017-02-23">
            3年7个月
        </a>
        <br>
        粉丝：
        <a href="https://home.cnblogs.com/u/question-sky/followers/">
            62
        </a>
        <br>
        关注：
        <a href="https://home.cnblogs.com/u/question-sky/followees/">
            2
        </a>
        <div id="p_b_follow">
<a href="javascript:void(0)" onclick="follow(&#39;209bb57b-77f9-e611-845c-ac853d9f53ac&#39;)">+加关注</a></div>
        <script>getFollowStatus('209bb57b-77f9-e611-845c-ac853d9f53ac');</script>
    </div>
</div>

</div>

<div id="sidebar_ad" style="display: block;"><div id="cnblogs_c3">
    <div id="div-gpt-ad-1598349888178-0" style="width: 300px; height: 250px;" data-google-query-id="CMuxjY_0kewCFQylvQodO3MDAA">
        
    <div id="google_ads_iframe_/1090369/C3_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C3_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C3_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="3" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/saved_resource(2).html"></iframe></div></div>
</div></div>
			<div id="blog-calendar" style="">

<table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar" border="0">
    <tbody>
        <tr>
            <td colspan="7">
                <table class="CalTitle" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2020/09/01&#39;); return false;">&lt;</a>
                            </td>
                            <td align="center">2020年10月</td>
                            <td align="right" class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2020/11/01&#39;); return false;">&gt;</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    <tr>
        <th class="CalDayHeader" align="center" abbr="日" scope="col">日</th>
        <th class="CalDayHeader" align="center" abbr="一" scope="col">一</th>
        <th class="CalDayHeader" align="center" abbr="二" scope="col">二</th>
        <th class="CalDayHeader" align="center" abbr="三" scope="col">三</th>
        <th class="CalDayHeader" align="center" abbr="四" scope="col">四</th>
        <th class="CalDayHeader" align="center" abbr="五" scope="col">五</th>
        <th class="CalDayHeader" align="center" abbr="六" scope="col">六</th>
    </tr>
            <tr>
                            <td class="CalOtherMonthDay" align="center">27</td>
                            <td class="CalOtherMonthDay" align="center">28</td>
                            <td class="CalOtherMonthDay" align="center">29</td>
                            <td class="CalOtherMonthDay" align="center">30</td>
                        <td class="CalTodayDay" align="center">
                            1
                        </td>
                        <td class="" align="center">
                            2
                        </td>
                    <td class="CalWeekendDay" align="center">
                        3
                    </td>
            </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            4
                        </td>
                            <td class="" align="center">
                                5
                            </td>
                            <td class="" align="center">
                                6
                            </td>
                            <td class="" align="center">
                                7
                            </td>
                            <td class="" align="center">
                                8
                            </td>
                            <td class="" align="center">
                                9
                            </td>
                        <td class="CalWeekendDay" align="center">
                            10
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            11
                        </td>
                            <td class="" align="center">
                                12
                            </td>
                            <td class="" align="center">
                                13
                            </td>
                            <td class="" align="center">
                                14
                            </td>
                            <td class="" align="center">
                                15
                            </td>
                            <td class="" align="center">
                                16
                            </td>
                        <td class="CalWeekendDay" align="center">
                            17
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            18
                        </td>
                            <td class="" align="center">
                                19
                            </td>
                            <td class="" align="center">
                                20
                            </td>
                            <td class="" align="center">
                                21
                            </td>
                            <td class="" align="center">
                                22
                            </td>
                            <td class="" align="center">
                                23
                            </td>
                        <td class="CalWeekendDay" align="center">
                            24
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            25
                        </td>
                            <td class="" align="center">
                                26
                            </td>
                            <td class="" align="center">
                                27
                            </td>
                            <td class="" align="center">
                                28
                            </td>
                            <td class="" align="center">
                                29
                            </td>
                            <td class="" align="center">
                                30
                            </td>
                        <td class="CalWeekendDay" align="center">
                            31
                        </td>
                </tr>
                <tr>
                        <td class="CalOtherMonthDay" align="center">
                            1
                        </td>
                            <td class="CalOtherMonthDay" align="center">
                                2
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                3
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                4
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                5
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                6
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            7
                        </td>
                </tr>
    </tbody>
</table></div><script>loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn">
<!-- 搜索 -->
<div id="sidebar_search" class="sidebar-block">
    
</div>

<!-- 常用链接 -->


<!-- 最新随笔 -->



<!-- 我的标签 -->
<div id="sidebar_toptags" class="sidebar-block">
    <div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/Spring/">Spring<span class="tag-count">(41)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/SpringMVC/">SpringMVC<span class="tag-count">(18)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/springboot/">springboot<span class="tag-count">(16)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/Mybatis/">Mybatis<span class="tag-count">(13)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/springcloud/">springcloud<span class="tag-count">(8)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/Java/">Java<span class="tag-count">(5)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/CAS/">CAS<span class="tag-count">(5)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/Spring%20Security/">Spring Security<span class="tag-count">(5)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/AOP/">AOP<span class="tag-count">(4)</span></a>
        </li>
        <li>
            <a href="https://www.cnblogs.com/question-sky/tag/Maven/">Maven<span class="tag-count">(4)</span></a>
        </li>
    <li>
        <a href="https://www.cnblogs.com/question-sky/tag/">更多</a>
    </li>

</ul>
</div>


</div>

<!-- 积分与排名 -->


<!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
<div id="sidebar_categories">
    
        <div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
            <h3 class="catListTitle">
                
随笔档案



            </h3>


            <ul>

                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2019/09.html" rel="" target="">
    2019年9月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2019/04.html" rel="" target="">
    2019年4月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2019/02.html" rel="" target="">
    2019年2月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2019/01.html" rel="" target="">
    2019年1月(5)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/12.html" rel="" target="">
    2018年12月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/11.html" rel="" target="">
    2018年11月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/10.html" rel="" target="">
    2018年10月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/09.html" rel="" target="">
    2018年9月(5)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/08.html" rel="" target="">
    2018年8月(5)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/07.html" rel="" target="">
    2018年7月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/05.html" rel="" target="">
    2018年5月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/04.html" rel="" target="">
    2018年4月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/03.html" rel="" target="">
    2018年3月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2018/02.html" rel="" target="">
    2018年2月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/11.html" rel="" target="">
    2017年11月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/10.html" rel="" target="">
    2017年10月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/09.html" rel="" target="">
    2017年9月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/08.html" rel="" target="">
    2017年8月(5)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/07.html" rel="" target="">
    2017年7月(9)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/06.html" rel="" target="">
    2017年6月(15)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/05.html" rel="" target="">
    2017年5月(12)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/04.html" rel="" target="">
    2017年4月(11)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/03.html" rel="" target="">
    2017年3月(12)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/question-sky/archive/2017/02.html" rel="" target="">
    2017年2月(2)
</a>
 

                        </li>

            </ul>


        </div>

</div>

<!-- 最新评论 -->
<div id="sidebar_recentcomments" class="sidebar-block">
    <div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div class="RecentCommentBlock">
        <ul>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/question-sky/p/7569405.html">1. Re:Mybatis源码解析-DynamicSqlSource和RawSqlSource的区别</a></li>
                    <li class="recent_comment_body"><p>看源码无论是$语句还是#语句最后都默认由PrepareStatement来执行sql的</p>
</li>
                    <li class="recent_comment_author">--Hsway</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/question-sky/p/8436366.html">2. Re:log4j源码解析-文件解析</a></li>
                    <li class="recent_comment_body"><p>非常好的文章</p>
</li>
                    <li class="recent_comment_author">--Lumia1020</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/question-sky/p/7170295.html">3. Re:SpringMVC源码情操陶冶-HandlerAdapter适配器简析</a></li>
                    <li class="recent_comment_body"><p>大佬真棒</p>
</li>
                    <li class="recent_comment_author">--罗山仔</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/question-sky/p/6890228.html">4. Re:web开发过程中关于路径问题的总结</a></li>
                    <li class="recent_comment_body">总结得很有用。</li>
                    <li class="recent_comment_author">--SupremeHover</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/question-sky/p/7061522.html">5. Re:Springboot security cas整合方案-原理篇</a></li>
                    <li class="recent_comment_body">我在debug调试的时候有一点没太想清楚，在这个流程里面，/logout/cas的请求被LogoutFilter拦截了，并且重定向到CAS的注销页面，后面的拦截器不在执行，那么SingleSignOu...</li>
                    <li class="recent_comment_author">--沈咵咵</li>
        </ul>
    </div>
</div>


</div>



<!-- 阅读排行榜 -->
<div id="sidebar_topviewedposts" class="sidebar-block">
    <div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/6806419.html">
                            1. Spring-shiro源码陶冶-AuthorizingRealm用户认证以及授权(19411)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/7061522.html">
                            2. Springboot security cas整合方案-原理篇(16019)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/9427245.html">
                            3. springboot情操陶冶-@Conditional和@AutoConfigureAfter注解解析(13972)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/7068511.html">
                            4. Springboot security cas整合方案-实践篇(7849)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/7063568.html">
                            5. Springboot security cas源码陶冶-CasAuthenticationFilter(5873)
                        </a>
                    </li>
        </ul>
    </div>
</div>


</div>

<!-- 评论排行榜 -->
<div id="sidebar_topcommentedposts" class="sidebar-block">
    <div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/6959493.html">
                            1. Spring源码情操陶冶-PathMatchingResourcePatternResolver路径资源匹配溶解器(10)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/9427245.html">
                            2. springboot情操陶冶-@Conditional和@AutoConfigureAfter注解解析(5)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/6550546.html">
                            3. Maven pom.xml简单归结(5)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/7569405.html">
                            4. Mybatis源码解析-DynamicSqlSource和RawSqlSource的区别(3)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/question-sky/p/7068511.html">
                            5. Springboot security cas整合方案-实践篇(3)
                        </a>
                    </li>
        </ul>
    </div>
</div>


</div>

<!-- 推荐排行榜 -->
<div id="sidebar_topdiggedposts" class="sidebar-block">
    
<div id="topdigg_posts_wrap">
    <div class="catListView">
        <h3 class="catListTitle">推荐排行榜</h3>
        <div id="TopDiggPostsBlock">
            <ul style="word-break: break-all">
                        <li>
                            <a href="https://www.cnblogs.com/question-sky/p/7240628.html">
                                1. SpringMVC源码情操陶冶-AbstractHandlerExceptionResolver(5)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/question-sky/p/6806419.html">
                                2. Spring-shiro源码陶冶-AuthorizingRealm用户认证以及授权(5)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/question-sky/p/9427245.html">
                                3. springboot情操陶冶-@Conditional和@AutoConfigureAfter注解解析(3)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/question-sky/p/7068511.html">
                                4. Springboot security cas整合方案-实践篇(3)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/question-sky/p/7061522.html">
                                5. Springboot security cas整合方案-原理篇(3)
                            </a>
                        </li>
            </ul>
        </div>
    </div>
</div>
</div></div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright © 2020 南柯问天
<br><span id="poweredby">Powered by .NET Core on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    <div id="page_end_html">
        <script type="text/javascript">
 $("#cnblogs_post_body a").css("color","#008200").css("padding","5px").css("target","_blank") ;
// $("a:visited").css("color","#ff1493").css("text-decoration","none") ;
</script>
    </div>
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?39b794a97f47c65b6b2e4e1741dcba38";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


<iframe id="google_osd_static_frame_4656537045050" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./Spring源码情操陶冶-tx_advice解析器 - 南柯问天 - 开发者的网上家园_files/saved_resource(3).html"></iframe></body></html>